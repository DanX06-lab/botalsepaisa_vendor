<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Pickup Request - BotalSePaisa</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white text-gray-800 font-sans">
    <!-- Navbar -->
    <nav class="flex justify-between items-center px-6 py-4 bg-white shadow">
        <div class="text-xl font-bold flex items-center space-x-2">
            <img src="your-logo.png" alt="logo" class="w-10 h-10">
            <span class="text-[#138808]">BotalSePaisa</span>
        </div>
        <div class="flex space-x-6 text-sm">
            <a href="vendor_dashboard.html" class="text-gray-700 hover:text-[#FF9933]">Dashboard</a>
        </div>
    </nav>

    <!-- Request Form -->
    <section class="py-12 px-4 max-w-xl mx-auto">
        <h2 class="text-3xl font-bold mb-6 text-center">Request Bottle Pickup</h2>

        <form id="pickupForm" class="space-y-6 bg-gray-50 p-6 rounded-lg shadow-md">
            <div>
                <label for="vendorName" class="block font-medium">Vendor Name</label>
                <input type="text" id="vendorName" class="mt-1 block w-full border border-gray-300 rounded p-2"
                    required>
            </div>

            <div>
                <label for="location" class="block font-medium">Pickup Location</label>
                <input type="text" id="location" class="mt-1 block w-full border border-gray-300 rounded p-2" required>
            </div>

            <div>
                <label for="bottleCount" class="block font-medium">Approximate Bottles</label>
                <input type="number" id="bottleCount" class="mt-1 block w-full border border-gray-300 rounded p-2"
                    required>
            </div>

            <div>
                <label for="phone" class="block font-medium">Contact Number</label>
                <input type="tel" id="phone" class="mt-1 block w-full border border-gray-300 rounded p-2" required>
            </div>

            <button type="submit"
                class="w-full bg-[#FF9933] hover:bg-[#e77e1e] text-white font-semibold py-2 rounded">Request
                Pickup</button>
        <div id="pickupMsg" class="text-center text-sm mt-2"></div>
</form>
    </section>
<script>
const form = document.getElementById('pickupForm');
const msgDiv = document.getElementById('pickupMsg');
form.onsubmit = async function(e) {
    e.preventDefault();
    msgDiv.textContent = '';
    const vendor_id = localStorage.getItem('vendor_id');
    const vendor_name = document.getElementById('vendorName').value.trim();
    const pickup_location = document.getElementById('location').value.trim();
    const approximate_bottles = document.getElementById('bottleCount').value.trim();
    const contact_number = document.getElementById('phone').value.trim();
    if (!vendor_id) {
        msgDiv.textContent = 'You must be logged in to request a pickup.';
        msgDiv.className = 'text-center text-red-600 mt-2';
        return;
    }
    try {
        const res = await fetch('/api/pickup/request', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ vendor_id, vendor_name, pickup_location, approximate_bottles, contact_number })
        });
        const result = await res.json();
        if (res.ok) {
            msgDiv.textContent = 'Pickup request submitted successfully!';
            msgDiv.className = 'text-center text-green-600 mt-2';
            form.reset();
        } else {
            msgDiv.textContent = result.error || 'Failed to submit request.';
            msgDiv.className = 'text-center text-red-600 mt-2';
        }
    } catch (err) {
        msgDiv.textContent = 'Network error. Please try again.';
        msgDiv.className = 'text-center text-red-600 mt-2';
    }
}
</script>
</body>

</html>